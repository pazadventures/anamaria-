<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Espacio de Sanaci√≥n Quir√∫rgica con Dios ¬∑ Ana Mar√≠a</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&family=Cinzel:wght@400;600&family=Jost:wght@300;400;500&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --ink: #1a0f2e;
  --deep: #2d1b4e;
  --purple: #5b3a8a;
  --deep-purple: #4a1e8c;
  --violet: #8b5cf6;
  --mist: #c4b0e0;
  --cream: #faf6f0;
  --gold: #c9a84c;
  --gold-light: #e8d5a3;
  --stone: #6b5b73;
  --parchment: #f5f0e8;
  --white: #ffffff;
  --green: #3a6b4a;
  --green-light: #eaf2ec;
  --red-soft: #8b3a3a;
  --red-light: #fdf0f0;
}

html, body {
  min-height: 100vh;
  background: var(--cream);
  font-family: 'Jost', sans-serif;
  color: var(--ink);
  padding: 40px 20px 100px;
}

body::before {
  content: '';
  position: fixed;
  inset: 0;
  background:
    radial-gradient(ellipse 80% 60% at 10% 5%, rgba(139,92,246,0.06) 0%, transparent 60%),
    radial-gradient(ellipse 60% 80% at 90% 90%, rgba(201,168,76,0.06) 0%, transparent 60%),
    radial-gradient(ellipse 40% 40% at 50% 50%, rgba(74,30,140,0.04) 0%, transparent 70%);
  pointer-events: none;
  z-index: 0;
}

.page { position: relative; z-index: 1; max-width: 780px; margin: 0 auto; }

/* ‚îÄ‚îÄ CORONA ‚îÄ‚îÄ */
.crown { text-align: center; margin-bottom: 32px; animation: fadeDown 1s ease both; }
.crown-line { display: flex; align-items: center; justify-content: center; gap: 16px; margin-bottom: 16px; }
.crown-rule { flex: 1; height: 1px; background: linear-gradient(to right, transparent, var(--gold), transparent); max-width: 160px; }
.crown-diamond { width: 6px; height: 6px; background: var(--gold); transform: rotate(45deg); }
.eyebrow { font-family: 'Cinzel', serif; font-size: 10px; letter-spacing: 4px; color: var(--gold); text-transform: uppercase; margin-bottom: 12px; }
.main-title { font-family: 'Cormorant Garamond', serif; font-size: clamp(26px, 5vw, 42px); font-weight: 300; color: var(--deep); line-height: 1.2; }
.main-title em { font-style: italic; color: var(--purple); }
.subtitle { font-family: 'Cormorant Garamond', serif; font-size: clamp(15px, 2.5vw, 18px); font-style: italic; font-weight: 300; color: var(--stone); margin-top: 10px; line-height: 1.6; }

/* ‚îÄ‚îÄ INTRO ‚îÄ‚îÄ */
.intro-block {
  background: var(--deep);
  border-radius: 3px;
  padding: 24px 28px;
  margin-bottom: 40px;
  animation: fadeUp 1s ease 0.15s both;
}
.intro-block p {
  font-family: 'Cormorant Garamond', serif;
  font-size: 17px;
  font-style: italic;
  color: var(--gold-light);
  line-height: 1.8;
  text-align: center;
}
.intro-block strong { font-style: normal; color: var(--gold); font-weight: 600; }

/* ‚îÄ‚îÄ SE√ëALES DE ACTIVACI√ìN ‚îÄ‚îÄ */
.triggers-section {
  margin-bottom: 40px;
  animation: fadeUp 1s ease 0.2s both;
}

.section-label {
  font-family: 'Cinzel', serif;
  font-size: 10px;
  letter-spacing: 4px;
  color: var(--purple);
  text-transform: uppercase;
  display: flex;
  align-items: center;
  gap: 14px;
  margin-bottom: 18px;
}
.section-label::after { content: ''; flex: 1; height: 1px; background: linear-gradient(to right, var(--mist), transparent); }

.triggers-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}

.trigger-pill {
  background: var(--red-light);
  border: 1px solid rgba(139,58,58,0.15);
  border-left: 3px solid var(--red-soft);
  border-radius: 2px;
  padding: 12px 16px;
  font-family: 'Jost', sans-serif;
  font-size: 13px;
  font-weight: 400;
  color: var(--red-soft);
  line-height: 1.4;
  display: flex;
  align-items: flex-start;
  gap: 8px;
}
.trigger-pill::before { content: '‚ñ∏'; font-size: 11px; margin-top: 1px; flex-shrink: 0; }

/* ‚îÄ‚îÄ PASOS DEL PROTOCOLO ‚îÄ‚îÄ */
.protocol-section {
  margin-bottom: 40px;
  animation: fadeUp 1s ease 0.25s both;
}

.steps { display: flex; flex-direction: column; gap: 0; }

.step {
  display: flex;
  gap: 0;
  position: relative;
  cursor: pointer;
}

/* L√≠nea vertical conectora */
.step:not(:last-child) .step-line { display: block; }
.step-connector {
  display: flex;
  flex-direction: column;
  align-items: center;
  flex-shrink: 0;
  width: 52px;
}

.step-num {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: var(--white);
  border: 2px solid var(--mist);
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'Cinzel', serif;
  font-size: 13px;
  font-weight: 600;
  color: var(--purple);
  flex-shrink: 0;
  transition: all 0.3s ease;
  position: relative;
  z-index: 1;
}

.step.active .step-num {
  background: var(--purple);
  border-color: var(--purple);
  color: var(--white);
  box-shadow: 0 0 0 4px rgba(91,58,138,0.12);
}

.step.done .step-num {
  background: var(--gold);
  border-color: var(--gold);
  color: var(--white);
}
.step.done .step-num::after { content: '‚úì'; font-size: 14px; font-family: 'Jost', sans-serif; }
.step.done .step-num span { display: none; }

.step-vline {
  width: 2px;
  flex: 1;
  min-height: 24px;
  background: linear-gradient(to bottom, var(--mist), rgba(196,176,224,0.2));
  margin: 4px 0;
}

.step-body {
  flex: 1;
  padding: 0 0 28px 16px;
}

.step-card {
  background: var(--white);
  border: 1px solid rgba(196,176,224,0.25);
  border-radius: 3px;
  padding: 18px 20px;
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
}

.step-card::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 2px;
  background: var(--step-color, var(--purple));
  opacity: 0;
  transition: opacity 0.3s ease;
}

.step.active .step-card { border-color: rgba(91,58,138,0.2); box-shadow: 0 4px 20px rgba(91,58,138,0.08); }
.step.active .step-card::before { opacity: 1; }
.step.done .step-card { background: var(--parchment); border-color: rgba(201,168,76,0.2); }
.step.done .step-card::before { opacity: 1; background: var(--gold); }

.step-title {
  font-family: 'Jost', sans-serif;
  font-size: 14px;
  font-weight: 500;
  color: var(--deep);
  margin-bottom: 6px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.step-icon { font-size: 16px; }

.step-desc {
  font-family: 'Cormorant Garamond', serif;
  font-size: 15px;
  font-style: italic;
  color: var(--stone);
  line-height: 1.65;
}

.step-note {
  margin-top: 10px;
  padding: 10px 14px;
  background: rgba(91,58,138,0.04);
  border-left: 2px solid var(--mist);
  border-radius: 0 2px 2px 0;
  font-family: 'Cormorant Garamond', serif;
  font-size: 14px;
  font-style: italic;
  color: var(--purple);
  line-height: 1.6;
  display: none;
}

.step.active .step-note { display: block; }

/* ‚îÄ‚îÄ BARRA DE PROGRESO DEL PROTOCOLO ‚îÄ‚îÄ */
.protocol-progress {
  background: var(--white);
  border: 1px solid rgba(196,176,224,0.25);
  border-radius: 3px;
  padding: 16px 20px;
  margin-bottom: 32px;
  display: flex;
  align-items: center;
  gap: 16px;
  animation: fadeUp 1s ease 0.2s both;
}
.protocol-progress-label {
  font-family: 'Cinzel', serif;
  font-size: 10px;
  letter-spacing: 2px;
  color: var(--stone);
  white-space: nowrap;
}
.protocol-track {
  flex: 1;
  height: 6px;
  background: var(--parchment);
  border-radius: 3px;
  overflow: hidden;
}
.protocol-fill {
  height: 100%;
  background: linear-gradient(to right, var(--purple), var(--gold));
  border-radius: 3px;
  transition: width 0.5s ease;
  width: 0%;
}
.protocol-pct {
  font-family: 'Cormorant Garamond', serif;
  font-size: 18px;
  font-weight: 600;
  color: var(--deep);
  white-space: nowrap;
}

/* Botones de control */
.protocol-controls {
  display: flex;
  gap: 10px;
  margin-bottom: 28px;
  flex-wrap: wrap;
  animation: fadeUp 1s ease 0.22s both;
}

.ctrl-btn {
  font-family: 'Cinzel', serif;
  font-size: 10px;
  letter-spacing: 1.5px;
  padding: 9px 18px;
  border-radius: 2px;
  border: 1px solid rgba(196,176,224,0.4);
  background: var(--white);
  color: var(--stone);
  cursor: pointer;
  transition: all 0.2s ease;
  text-transform: uppercase;
}
.ctrl-btn:hover { border-color: var(--purple); color: var(--purple); }
.ctrl-btn.primary { background: var(--deep); color: var(--gold-light); border-color: var(--deep); }
.ctrl-btn.primary:hover { background: var(--purple); }
.ctrl-btn.danger { border-color: rgba(139,58,58,0.3); color: var(--red-soft); }
.ctrl-btn.danger:hover { background: var(--red-light); }

/* ‚îÄ‚îÄ VERDADES DE ANCLAJE ‚îÄ‚îÄ */
.anchors-section {
  margin-bottom: 40px;
  animation: fadeUp 1s ease 0.35s both;
}

.anchor-cards { display: flex; flex-direction: column; gap: 10px; }

.anchor-card {
  background: var(--green-light);
  border: 1px solid rgba(58,107,74,0.15);
  border-left: 3px solid var(--green);
  border-radius: 2px;
  padding: 16px 20px;
  display: flex;
  align-items: flex-start;
  gap: 12px;
}

.anchor-icon { font-size: 18px; flex-shrink: 0; margin-top: 1px; }

.anchor-body {}
.anchor-truth {
  font-family: 'Cormorant Garamond', serif;
  font-size: 17px;
  font-style: italic;
  font-weight: 400;
  color: var(--green);
  line-height: 1.5;
  margin-bottom: 4px;
}
.anchor-sub {
  font-family: 'Jost', sans-serif;
  font-size: 12px;
  font-weight: 300;
  color: rgba(58,107,74,0.7);
  letter-spacing: 0.5px;
}

/* ‚îÄ‚îÄ ORACI√ìN BREVE ‚îÄ‚îÄ */
.prayer-section {
  margin-bottom: 40px;
  animation: fadeUp 1s ease 0.4s both;
}

.prayer-card {
  background: var(--deep);
  border-radius: 3px;
  padding: 28px 32px;
  text-align: center;
  position: relative;
  overflow: hidden;
}

.prayer-card::before {
  content: '‚ú¶';
  position: absolute;
  top: 16px; left: 20px;
  font-size: 10px;
  color: rgba(201,168,76,0.3);
  letter-spacing: 8px;
}
.prayer-card::after {
  content: '‚ú¶';
  position: absolute;
  bottom: 16px; right: 20px;
  font-size: 10px;
  color: rgba(201,168,76,0.3);
  letter-spacing: 8px;
}

.prayer-eyebrow {
  font-family: 'Cinzel', serif;
  font-size: 9px;
  letter-spacing: 4px;
  color: var(--gold);
  text-transform: uppercase;
  margin-bottom: 18px;
}

.prayer-text {
  font-family: 'Cormorant Garamond', serif;
  font-size: clamp(16px, 2.5vw, 20px);
  font-style: italic;
  font-weight: 300;
  color: rgba(232,213,163,0.9);
  line-height: 1.9;
  max-width: 560px;
  margin: 0 auto;
}

.prayer-text em { color: var(--gold); font-style: normal; }

/* ‚îÄ‚îÄ REGISTRO DEL ESPACIO ‚îÄ‚îÄ */
.registry-section {
  margin-bottom: 40px;
  animation: fadeUp 1s ease 0.45s both;
}

.registry-fields { display: flex; flex-direction: column; gap: 18px; }

.registry-field {}
.registry-label {
  font-family: 'Cinzel', serif;
  font-size: 10px;
  letter-spacing: 2.5px;
  color: var(--purple);
  text-transform: uppercase;
  margin-bottom: 8px;
  display: flex; align-items: center; gap: 10px;
}
.registry-label::after { content: ''; flex: 1; height: 1px; background: linear-gradient(to right, rgba(196,176,224,0.4), transparent); }

.registry-prompt {
  font-family: 'Cormorant Garamond', serif;
  font-size: 14px;
  font-style: italic;
  color: var(--stone);
  margin-bottom: 8px;
  line-height: 1.5;
}

.registry-area {
  width: 100%;
  min-height: 72px;
  background: var(--white);
  border: 1px solid rgba(196,176,224,0.3);
  border-radius: 3px;
  padding: 14px 16px;
  font-family: 'Cormorant Garamond', serif;
  font-size: 15px;
  color: var(--deep);
  resize: vertical;
  outline: none;
  transition: border-color 0.2s, box-shadow 0.2s;
  line-height: 1.65;
}
.registry-area:focus { border-color: var(--mist); box-shadow: 0 0 0 3px rgba(196,176,224,0.1); }
.registry-area::placeholder { color: rgba(107,91,115,0.3); font-style: italic; }

/* ‚îÄ‚îÄ EXPORTAR ‚îÄ‚îÄ */
.export-section { margin-bottom: 48px; animation: fadeUp 1s ease 0.5s both; }
.export-header {
  font-family: 'Cinzel', serif; font-size: 10px; letter-spacing: 4px;
  color: var(--mist); text-transform: uppercase; text-align: center;
  margin-bottom: 16px; display: flex; align-items: center; gap: 16px;
}
.export-header::before, .export-header::after { content: ''; flex: 1; height: 1px; background: linear-gradient(to right, transparent, var(--mist), transparent); }
.export-btns { display: flex; gap: 10px; flex-wrap: wrap; justify-content: center; }
.export-btn {
  font-family: 'Cinzel', serif; font-size: 10px; letter-spacing: 1.5px;
  padding: 10px 18px; border-radius: 2px;
  border: 1px solid rgba(196,176,224,0.4);
  background: var(--white); color: var(--stone);
  cursor: pointer; transition: all 0.2s ease; text-transform: uppercase;
}
.export-btn:hover { border-color: var(--purple); color: var(--purple); }
.export-btn.primary { background: var(--deep); color: var(--gold-light); border-color: var(--deep); }
.export-btn.primary:hover { background: var(--purple); }

/* ‚îÄ‚îÄ CIERRE ‚îÄ‚îÄ */
.closing { text-align: center; animation: fadeUp 1s ease 0.55s both; }
.closing-rule { display: flex; align-items: center; gap: 16px; margin-bottom: 28px; }
.closing-rule span { flex: 1; height: 1px; background: linear-gradient(to right, transparent, var(--mist), transparent); }
.closing-diamonds { color: var(--gold); font-size: 10px; letter-spacing: 6px; }
.affirmation { font-family: 'Cormorant Garamond', serif; font-size: clamp(15px,2.5vw,19px); font-style: italic; font-weight: 300; color: var(--purple); line-height: 1.8; max-width: 520px; margin: 0 auto 16px; }
.signature { font-family: 'Cinzel', serif; font-size: 10px; letter-spacing: 3px; color: var(--mist); text-transform: uppercase; }

/* ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ */
.toast {
  position: fixed; bottom: 30px; right: 30px;
  background: var(--deep); color: var(--gold-light);
  font-family: 'Cinzel', serif; font-size: 11px; letter-spacing: 1.5px;
  padding: 12px 20px; border-radius: 3px;
  opacity: 0; transform: translateY(10px);
  transition: all 0.3s ease; pointer-events: none; z-index: 100;
  border-left: 3px solid var(--gold);
}
.toast.show { opacity: 1; transform: translateY(0); }

@keyframes fadeDown { from { opacity:0; transform:translateY(-18px); } to { opacity:1; transform:translateY(0); } }
@keyframes fadeUp   { from { opacity:0; transform:translateY(18px);  } to { opacity:1; transform:translateY(0); } }

@media (max-width: 560px) {
  .triggers-grid { grid-template-columns: 1fr; }
  .protocol-controls { flex-direction: column; }
  .ctrl-btn { text-align: center; }
}
</style>
</head>
<body>
<div class="page">

  <!-- CORONA -->
  <div class="crown">
    <div class="crown-line"><div class="crown-rule"></div><div class="crown-diamond"></div><div class="crown-rule"></div></div>
    <div class="eyebrow">Protocolo sagrado ¬∑ Ana Mar√≠a</div>
    <h1 class="main-title">Espacio de sanaci√≥n<br><em>quir√∫rgica con Dios</em></h1>
    <div class="subtitle">Act√≠valo cuando un patr√≥n despierte.<br>No hay prisa. Dios tiene tiempo.</div>
  </div>

  <!-- INTRO -->
  <div class="intro-block">
    <p>Este es tu protocolo. Escrito desde tu propio esp√≠ritu.<br>
    Cuando la tormenta llegue, <strong>no reacciones</strong>.<br>
    Abre este espacio. Sigue los pasos. <strong>Deja que Dios opere.</strong></p>
  </div>

  <!-- SE√ëALES DE ACTIVACI√ìN -->
  <div class="triggers-section">
    <div class="section-label">‚ö†Ô∏è Se√±ales de activaci√≥n</div>
    <div class="triggers-grid">
      <div class="trigger-pill">Siento que voy a decepcionar o fallar</div>
      <div class="trigger-pill">Me siento manipulada o ignorada</div>
      <div class="trigger-pill">Me comparo y siento que me traicionar√°n</div>
      <div class="trigger-pill">Siento que pierdo el control o la autoridad</div>
      <div class="trigger-pill">Siento que no soy suficiente para mi esposo</div>
      <div class="trigger-pill">Siento que David quiere sacarme del proyecto</div>
      <div class="trigger-pill">Me siento invisible o no valorada</div>
      <div class="trigger-pill">Siento que no me cuidan o no les importo</div>
    </div>
  </div>

  <!-- PROGRESO DEL PROTOCOLO -->
  <div class="protocol-progress">
    <div class="protocol-progress-label">Progreso del protocolo</div>
    <div class="protocol-track">
      <div class="protocol-fill" id="protocolFill"></div>
    </div>
    <div class="protocol-pct" id="protocolPct">0 / 11</div>
  </div>

  <!-- CONTROLES -->
  <div class="protocol-controls">
    <button class="ctrl-btn primary" onclick="nextStep()">‚Üí Siguiente paso</button>
    <button class="ctrl-btn" onclick="prevStep()">‚Üê Paso anterior</button>
    <button class="ctrl-btn danger" onclick="resetProtocol()">‚Ü∫ Reiniciar protocolo</button>
  </div>

  <!-- PASOS DEL PROTOCOLO -->
  <div class="protocol-section">
    <div class="section-label">Los 11 pasos</div>
    <div class="steps" id="stepsContainer">

      <div class="step" id="step-1" style="--step-color: #8b5cf6" onclick="activateStep(1)">
        <div class="step-connector">
          <div class="step-num"><span>1</span></div>
          <div class="step-vline"></div>
        </div>
        <div class="step-body">
          <div class="step-card">
            <div class="step-title"><span class="step-icon">üå¨Ô∏è</span> Sonr√≠e ¬∑ Cierra los ojos ¬∑ Respira</div>
            <div class="step-desc">Antes de hacer cualquier cosa. Solo respira. No respondas todav√≠a.</div>
            <div class="step-note">Inhala 4 tiempos ¬∑ Ret√©n 4 tiempos ¬∑ Exhala 4 tiempos.<br>Repite hasta sentir que el cuerpo afloja.</div>
          </div>
        </div>
      </div>

      <div class="step" id="step-2" style="--step-color: #7b5ea7" onclick="activateStep(2)">
        <div class="step-connector">
          <div class="step-num"><span>2</span></div>
          <div class="step-vline"></div>
        </div>
        <div class="step-body">
          <div class="step-card">
            <div class="step-title"><span class="step-icon">üö∂‚Äç‚ôÄÔ∏è</span> Ret√≠rate con tranquilidad</div>
            <div class="step-desc">Un momento a solas. No huyes ‚Äî te cuidas. Le das espacio a la ola.</div>
            <div class="step-note">No expliques. No te justifiques. Solo di: "Dame un momento." Y ret√≠rate con calma.</div>
          </div>
        </div>
      </div>

      <div class="step" id="step-3" style="--step-color: #6b4e9e" onclick="activateStep(3)">
        <div class="step-connector">
          <div class="step-num"><span>3</span></div>
          <div class="step-vline"></div>
        </div>
        <div class="step-body">
          <div class="step-card">
            <div class="step-title"><span class="step-icon">üåä</span> Surfea la emoci√≥n</div>
            <div class="step-desc">Observa la emoci√≥n. No la juzgues. Deja que llegue la ola... y que pase.</div>
            <div class="step-note">La emoci√≥n tiene informaci√≥n. No es tu enemiga. Es un mensajero. Deja que hable sin actuar desde ella.</div>
          </div>
        </div>
      </div>

      <div class="step" id="step-4" style="--step-color: #5b3a8a" onclick="activateStep(4)">
        <div class="step-connector">
          <div class="step-num"><span>4</span></div>
          <div class="step-vline"></div>
        </div>
        <div class="step-body">
          <div class="step-card">
            <div class="step-title"><span class="step-icon">üåå</span> Contempla el escenario interno</div>
            <div class="step-desc">Mira la tormenta desde adentro. Espera. Rel√°jate. Mira el cielo.</div>
            <div class="step-note">Eres el observador, no la tormenta. La tormenta pasa. T√∫ permaneces.</div>
          </div>
        </div>
      </div>

      <div class="step" id="step-5" style="--step-color: #4a2a7a" onclick="activateStep(5)">
        <div class="step-connector">
          <div class="step-num"><span>5</span></div>
          <div class="step-vline"></div>
        </div>
        <div class="step-body">
          <div class="step-card">
            <div class="step-title"><span class="step-icon">üïäÔ∏è</span> El Esp√≠ritu Santo decodifica</div>
            <div class="step-desc">Cuando pasa el momentum, el Esp√≠ritu Santo abre el espacio de comprensi√≥n.</div>
            <div class="step-note">Preg√∫ntate: ¬øQu√© me est√° diciendo esta emoci√≥n? ¬øQu√© herida antigua est√° tocando este momento?</div>
          </div>
        </div>
      </div>

      <div class="step" id="step-6" style="--step-color: #5b3a8a" onclick="activateStep(6)">
        <div class="step-connector">
          <div class="step-num"><span>6</span></div>
          <div class="step-vline"></div>
        </div>
        <div class="step-body">
          <div class="step-card">
            <div class="step-title"><span class="step-icon">üíú</span> Abre el espacio con Ana Emocional</div>
            <div class="step-desc">Con mansedumbre, preg√∫ntale: ¬øQuieres contarme lo que pas√≥?</div>
            <div class="step-note">Si dice no ‚Äî espera. Si dice s√≠ ‚Äî escucha sin juicio, sin prisa. Solo presencia plena.</div>
          </div>
        </div>
      </div>

      <div class="step" id="step-7" style="--step-color: #6b4e9e" onclick="activateStep(7)">
        <div class="step-connector">
          <div class="step-num"><span>7</span></div>
          <div class="step-vline"></div>
        </div>
        <div class="step-body">
          <div class="step-card">
            <div class="step-title"><span class="step-icon">ü§ç</span> Abraza ¬∑ Acaricia ¬∑ Consuela a Ana</div>
            <div class="step-desc">Sin juicio. Sin prisa. Deja que el dolor hable y sea sostenido.</div>
            <div class="step-note">El dolor sostenido sana. El dolor ignorado regresa disfrazado de reacci√≥n. Dale espacio ahora.</div>
          </div>
        </div>
      </div>

      <div class="step" id="step-8" style="--step-color: #c9a84c" onclick="activateStep(8)">
        <div class="step-connector">
          <div class="step-num"><span>8</span></div>
          <div class="step-vline"></div>
        </div>
        <div class="step-body">
          <div class="step-card">
            <div class="step-title"><span class="step-icon">‚ú®</span> Llama al Doctor ¬∑ Jesucristo entra</div>
            <div class="step-desc">Inv√≠talo. Dale el poder y la autoridad. Deja que ilumine, sane y restaure.</div>
            <div class="step-note">"Se√±or Jes√∫s, te invito a este espacio. Lo que yo no puedo sanar, T√∫ s√≠. Entra. Opera. Soy tuya."</div>
          </div>
        </div>
      </div>

      <div class="step" id="step-9" style="--step-color: #b8940a" onclick="activateStep(9)">
        <div class="step-connector">
          <div class="step-num"><span>9</span></div>
          <div class="step-vline"></div>
        </div>
        <div class="step-body">
          <div class="step-card">
            <div class="step-title"><span class="step-icon">üôè</span> Ora al Padre Celestial</div>
            <div class="step-desc">Agrad√©cele su amor infinito que sana los corazones rotos. Al√°balo. Recibe su gracia.</div>
            <div class="step-note">"Padre, gracias porque tu amor por m√≠ no depende de mi perfecci√≥n. Gracias porque me sostienes. Recibo tu gracia hoy."</div>
          </div>
        </div>
      </div>

      <div class="step" id="step-10" style="--step-color: #3a6b4a" onclick="activateStep(10)">
        <div class="step-connector">
          <div class="step-num"><span>10</span></div>
          <div class="step-vline"></div>
        </div>
        <div class="step-body">
          <div class="step-card">
            <div class="step-title"><span class="step-icon">üèõÔ∏è</span> Deja que Dios instale su reino</div>
            <div class="step-desc">Permite que el proceso se complete. Recibe su paz. Sigue construyendo el templo.</div>
            <div class="step-note">No fuerces el cierre. Cuando haya paz ‚Äî real, tranquila, sin ansiedad ‚Äî el proceso est√° completo.</div>
          </div>
        </div>
      </div>

      <div class="step" id="step-11" onclick="activateStep(11)">
        <div class="step-connector">
          <div class="step-num"><span>11</span></div>
        </div>
        <div class="step-body">
          <div class="step-card">
            <div class="step-title"><span class="step-icon">üåø</span> Ana Mar√≠a vuelve al mundo</div>
            <div class="step-desc">Con el alma restaurada. En paz. Desde el fruto del Esp√≠ritu Santo: amor, honra y paz.</div>
            <div class="step-note">Antes de responder o actuar, preg√∫ntate: ¬øEstoy respondiendo desde el fruto del Esp√≠ritu o desde la herida? Si hay paz ‚Äî act√∫a.</div>
          </div>
        </div>
      </div>

    </div>
  </div>

  <!-- VERDADES DE ANCLAJE -->
  <div class="anchors-section">
    <div class="section-label">‚úÖ Verdades que anclan a Ana Mar√≠a</div>
    <div class="anchor-cards">
      <div class="anchor-card">
        <div class="anchor-icon">‚öì</div>
        <div class="anchor-body">
          <div class="anchor-truth">"Soy suficiente porque Cristo lo dice. No porque ellos lo confirmen."</div>
          <div class="anchor-sub">Contra el patr√≥n: "no soy suficiente"</div>
        </div>
      </div>
      <div class="anchor-card">
        <div class="anchor-icon">‚öì</div>
        <div class="anchor-body">
          <div class="anchor-truth">"Mi valor no depende de su validaci√≥n. Mi ancla es Cristo."</div>
          <div class="anchor-sub">Contra el patr√≥n: "me est√°n usando / no les importo"</div>
        </div>
      </div>
      <div class="anchor-card">
        <div class="anchor-icon">‚öì</div>
        <div class="anchor-body">
          <div class="anchor-truth">"Dios me sostiene. No necesito controlar para estar segura."</div>
          <div class="anchor-sub">Contra el patr√≥n: "pierdo el control / la autoridad"</div>
        </div>
      </div>
      <div class="anchor-card">
        <div class="anchor-icon">‚öì</div>
        <div class="anchor-body">
          <div class="anchor-truth">"El amor de Dios por m√≠ es incondicional. No lo puedo perder."</div>
          <div class="anchor-sub">Contra el patr√≥n: "no me aman de verdad"</div>
        </div>
      </div>
      <div class="anchor-card">
        <div class="anchor-icon">‚öì</div>
        <div class="anchor-body">
          <div class="anchor-truth">"Puedo soltar y seguir en paz. No todo es m√≠o para resolver."</div>
          <div class="anchor-sub">Contra el patr√≥n: "tengo que sostener todo"</div>
        </div>
      </div>
    </div>
  </div>

  <!-- ORACI√ìN -->
  <div class="prayer-section">
    <div class="prayer-card">
      <div class="prayer-eyebrow">Oraci√≥n de apertura del espacio</div>
      <div class="prayer-text">
        "Padre, <em>aqu√≠ estoy</em>.<br>
        No con respuestas ‚Äî con mi herida.<br>
        Te entrego este momento, esta emoci√≥n, esta tormenta.<br>
        <em>T√∫ eres el Doctor.</em> Yo soy la paciente.<br>
        Opera en m√≠ lo que yo no puedo sanar sola.<br>
        Que cuando salga de este espacio,<br>
        sea <em>Ana Mar√≠a</em> ‚Äî la que T√∫ dise√±aste ‚Äî<br>
        y no la herida actuando."
      </div>
    </div>
  </div>

  <!-- REGISTRO -->
  <div class="registry-section">
    <div class="section-label">üìù Registro de este espacio</div>
    <div class="registry-fields">

      <div class="registry-field">
        <div class="registry-label">¬øQu√© patr√≥n se activ√≥?</div>
        <div class="registry-prompt">Identifica el detonante y la emoci√≥n principal que surgi√≥</div>
        <textarea class="registry-area" id="reg-patron" placeholder="El patr√≥n que se activ√≥ fue... La emoci√≥n fue..." oninput="saveReg('patron', this.value)"></textarea>
      </div>

      <div class="registry-field">
        <div class="registry-label">¬øQu√© herida toc√≥?</div>
        <div class="registry-prompt">¬øQu√© momento del pasado est√° conectado con lo que sentiste?</div>
        <textarea class="registry-area" id="reg-herida" placeholder="Esta situaci√≥n me recuerda cuando..." oninput="saveReg('herida', this.value)"></textarea>
      </div>

      <div class="registry-field">
        <div class="registry-label">¬øQu√© hizo Dios en este espacio?</div>
        <div class="registry-prompt">Lo que recibiste, lo que san√≥, lo que ilumin√≥ el Esp√≠ritu Santo</div>
        <textarea class="registry-area" id="reg-dios" placeholder="En este espacio, Dios me mostr√≥ / san√≥ / dijo..." oninput="saveReg('dios', this.value)"></textarea>
      </div>

      <div class="registry-field">
        <div class="registry-label">¬øC√≥mo sal√≠ del espacio?</div>
        <div class="registry-prompt">Tu estado emocional y espiritual al cerrar el protocolo</div>
        <textarea class="registry-area" id="reg-salida" placeholder="Sal√≠ con... Desde el fruto del Esp√≠ritu pude..." oninput="saveReg('salida', this.value)"></textarea>
      </div>

      <div class="registry-field">
        <div class="registry-label">‚úçÔ∏è ¬øHay semilla para la trilog√≠a?</div>
        <div class="registry-prompt">Una imagen, frase o emoci√≥n que pertenece a uno de los tres libros</div>
        <textarea class="registry-area" id="reg-semilla" placeholder="La semilla que emerge de este espacio es..." oninput="saveReg('semilla', this.value)" style="border-color: rgba(201,168,76,0.25);"></textarea>
      </div>

    </div>
  </div>

  <!-- EXPORTAR -->
  <div class="export-section">
    <div class="export-header">Exportar registro</div>
    <div class="export-btns">
      <button class="export-btn primary" onclick="exportSession()">üìÑ Exportar este espacio</button>
      <button class="export-btn" onclick="exportAll()">üóÇ Exportar todo el historial</button>
    </div>
  </div>

  <!-- CIERRE -->
  <div class="closing">
    <div class="closing-rule"><span></span><span class="closing-diamonds">‚óÜ ‚óÜ ‚óÜ</span><span></span></div>
    <p class="affirmation">
      "El Esp√≠ritu Santo que yace en Ana<br>
      empieza a decodificar la informaci√≥n<br>
      que le trae la emoci√≥n."
    </p>
    <div class="signature">Ana Mar√≠a ¬∑ Un coraz√≥n para Dios</div>
  </div>

</div>

<div class="toast" id="toast"></div>

<script>
// ‚îÄ‚îÄ ESTADO DEL PROTOCOLO ‚îÄ‚îÄ
let currentStep = 0;
const TOTAL_STEPS = 11;

function activateStep(n) {
  currentStep = n;
  updateSteps();
}

function nextStep() {
  if (currentStep < TOTAL_STEPS) {
    currentStep++;
    updateSteps();
    scrollToStep(currentStep);
  } else {
    showToast('¬°Protocolo completado! Que la paz de Dios te acompa√±e. üåø');
  }
}

function prevStep() {
  if (currentStep > 1) { currentStep--; updateSteps(); scrollToStep(currentStep); }
  else if (currentStep === 1) { currentStep = 0; updateSteps(); }
}

function resetProtocol() {
  currentStep = 0;
  updateSteps();
  showToast('Protocolo reiniciado');
}

function updateSteps() {
  for (let i = 1; i <= TOTAL_STEPS; i++) {
    const el = document.getElementById('step-' + i);
    if (!el) continue;
    el.classList.remove('active', 'done');
    if (i < currentStep) el.classList.add('done');
    else if (i === currentStep) el.classList.add('active');
  }
  const pct = Math.round((currentStep / TOTAL_STEPS) * 100);
  document.getElementById('protocolFill').style.width = pct + '%';
  document.getElementById('protocolPct').textContent = currentStep + ' / ' + TOTAL_STEPS;
}

function scrollToStep(n) {
  const el = document.getElementById('step-' + n);
  if (el) el.scrollIntoView({ behavior: 'smooth', block: 'center' });
}

// ‚îÄ‚îÄ REGISTRO ‚îÄ‚îÄ
const SESSION_KEY = 'sanacion_' + new Date().toISOString().split('T')[0] + '_' + Date.now();

function saveReg(field, value) {
  const stored = JSON.parse(localStorage.getItem(SESSION_KEY) || '{}');
  stored[field] = value;
  stored.date = new Date().toISOString();
  localStorage.setItem(SESSION_KEY, JSON.stringify(stored));
}

// ‚îÄ‚îÄ EXPORTAR ‚îÄ‚îÄ
function buildSessionText(key, data) {
  const date = data.date ? new Date(data.date).toLocaleString('es-ES') : key;
  return `‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
ESPACIO DE SANACI√ìN QUIR√öRGICA CON DIOS
Ana Mar√≠a ¬∑ ${date}
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

[PATR√ìN ACTIVADO]
${data.patron || '(sin registrar)'}

[HERIDA QUE TOC√ì]
${data.herida || '(sin registrar)'}

[LO QUE DIOS HIZO]
${data.dios || '(sin registrar)'}

[C√ìMO SAL√ç DEL ESPACIO]
${data.salida || '(sin registrar)'}

[SEMILLA DE LA TRILOG√çA]
${data.semilla || '(sin registrar)'}

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n`;
}

function exportSession() {
  const data = JSON.parse(localStorage.getItem(SESSION_KEY) || '{}');
  const text = buildSessionText(SESSION_KEY, data);
  download(text, `Sanacion_${new Date().toISOString().split('T')[0]}.txt`);
  showToast('Espacio exportado ‚úì');
}

function exportAll() {
  const keys = Object.keys(localStorage).filter(k => k.startsWith('sanacion_')).sort();
  if (keys.length === 0) { showToast('No hay sesiones guardadas a√∫n'); return; }
  let text = `HISTORIAL COMPLETO ¬∑ ESPACIOS DE SANACI√ìN QUIR√öRGICA CON DIOS
Ana Mar√≠a ¬∑ ${keys.length} sesiones registradas
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

PROTOCOLO DE AN√ÅLISIS:
- ¬øCu√°l es el patr√≥n que se activa con m√°s frecuencia?
- ¬øQu√© heridas aparecen recurrentemente?
- ¬øC√≥mo evoluciona la calidad de lo que Dios hace en cada espacio?
- ¬øQu√© semillas emergen con m√°s fuerza para la trilog√≠a?
- ¬øHay un arco de sanaci√≥n visible en el tiempo?

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n`;
  keys.forEach(k => {
    const data = JSON.parse(localStorage.getItem(k) || '{}');
    text += buildSessionText(k, data) + '\n';
  });
  download(text, `Sanacion_HistorialCompleto.txt`);
  showToast('Historial exportado ‚úì');
}

function download(text, filename) {
  const blob = new Blob([text], { type: 'text/plain;charset=utf-8' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url; a.download = filename; a.click();
  URL.revokeObjectURL(url);
}

function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 3000);
}

// ‚îÄ‚îÄ INIT ‚îÄ‚îÄ
window.addEventListener('DOMContentLoaded', () => {
  updateSteps();
  // Restaurar campos del d√≠a si existen
  const todayKeys = Object.keys(localStorage).filter(k => {
    const today = new Date().toISOString().split('T')[0];
    return k.startsWith('sanacion_' + today);
  });
  if (todayKeys.length > 0) {
    const latest = todayKeys.sort().pop();
    const data = JSON.parse(localStorage.getItem(latest) || '{}');
    ['patron','herida','dios','salida','semilla'].forEach(f => {
      const el = document.getElementById('reg-' + f);
      if (el && data[f]) el.value = data[f];
    });
  }
});
</script>
</body>
</html>
